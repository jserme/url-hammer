var InEdit=React.createClass({displayName:"InEdit",render:function(){var style={display:this.props.showDelete?"inline":"none"};return React.createElement("div",{className:"row-fluid"},React.createElement("div",{className:"inedit span12"},React.createElement("label",{className:"inedit-label span2"},this.props.label," : "),React.createElement("input",{className:"inedit-input span10",onChange:this.props.onChange,type:"text",value:this.props.value}),React.createElement("span",{className:"remove",style:style,onClick:this.props.onDelete},React.createElement("i",{className:"icon icon-minus-circled"}))))}});var AutoResizeInput=React.createClass({displayName:"AutoResizeInput",inputChange:function(evt){if(this.props.inputChange){this.props.inputChange(evt)}var input=this.getDOMNode();input.style.height="auto";input.style.height=input.scrollHeight+"px"},componentDidMount:function(){var input=this.getDOMNode();input.style.height="auto";input.style.height=input.scrollHeight+"px";var nodeValLen=input.value.length;if(input.setSelectionRange){input.setSelectionRange(nodeValLen,nodeValLen);input.focus()}},render:function(){return React.createElement("textarea",{className:"input",onChange:this.inputChange,placeholder:this.props.placeholder,value:this.props.value})}});var Sidebar=React.createClass({displayName:"Sidebar",render:function(){return React.createElement("div",{className:"span2 sidebar"},React.createElement("div",{className:"logo page-header"},React.createElement("i",{className:"icon-hammer"}),React.createElement("h4",null,"URL Hammer")),React.createElement("ul",{className:"unstyled links"},React.createElement("li",null,React.createElement("a",{href:"https://github.com/jserme/url-hammer"},React.createElement("i",{className:"icon-github-circled"}),"Github")),React.createElement("li",null,React.createElement("a",{href:"http://weibo.com/ihubo"},React.createElement("i",{className:"icon-weibo"}),"Weibo"))))}});var UrlInput=React.createClass({displayName:"UrlInput",inputChange:function(evt){this.props.inputChange(evt.target.value)},render:function(){return React.createElement("div",{className:"url-input"},React.createElement(AutoResizeInput,{inputChange:this.inputChange,placeholder:"Type or paste a url here..",value:this.props.initUrl}))}});var DisplayPanel=React.createClass({displayName:"DisplayPanel",getInitialState:function(){return{hideEmpty:false,showEditForm:false}},setHide:function(){this.setState({hideEmpty:!this.state.hideEmpty})},setForm:function(){this.setState({showEditForm:!this.state.showEditForm})},handleChange:function(key,evt){this.props.onChange(key,evt.target.value)},handleDelete:function(key){this.props.onDelete(key)},onAdd:function(){var key=this.refs.key.getDOMNode().value.replace(/^\s+|\s+$/,"");var val=this.refs.val.getDOMNode().value;if(key==""){return alert("key should not be empty")}this.props.onAdd(key,val);this.setState({showEditForm:false})},render:function(){var list;if(this.props.data&&Object.keys(this.props.data).length>0){list=[];Object.keys(this.props.data).forEach(function(v){if(!this.state.hideEmpty||this.props.data[v]!==""){list.push(React.createElement(InEdit,{label:v,value:this.props.data[v],showDelete:true,onChange:this.handleChange.bind(this,v),onDelete:this.handleDelete.bind(this,v)}))}}.bind(this))}else{list="no "+this.props.name+" found"}var editForm="";if(this.state.showEditForm){editForm=React.createElement("form",{className:"displayPanel-edit-form"},React.createElement("label",null,"key: "),React.createElement("input",{autoFocus:true,ref:"key",type:"text"}),React.createElement("br",null),React.createElement("label",null,"val: "),React.createElement("input",{ref:"val",type:"text"}),React.createElement("br",null),React.createElement("input",{className:"btn",onClick:this.onAdd,type:"button",value:"confirm"}))}return React.createElement("div",null,React.createElement("div",{className:"list-header"},React.createElement("h4",null,this.props.name,React.createElement("span",{className:"des",onClick:this.setForm},this.state.showEditForm?"-":"+")),editForm,React.createElement("span",{className:"setHide"},React.createElement("label",null,React.createElement("input",{type:"checkbox",onChange:this.setHide}),"hide empty ",this.props.name))),list)}});var Content=React.createClass({displayName:"Content",onFullPathChange:function(evt){var urlObj=this.props.urlObj;urlObj.fullpath=evt.target.value;this.props.onChange(urlObj)},onQueryChange:function(key,val){var urlObj=this.props.urlObj;urlObj.queryObj[key]=val;this.props.onChange(urlObj)},onQueryDelete:function(key){var urlObj=this.props.urlObj;delete urlObj.queryObj[key];this.props.onChange(urlObj)},onQueryAdd:function(key,val){var urlObj=this.props.urlObj;if(urlObj.queryObj[key]){urlObj.queryObj[key]+=","+val}else{urlObj.queryObj[key]=val}this.props.onChange(urlObj)},onFragmentChange:function(key,val){var urlObj=this.props.urlObj;urlObj.fragmentObj[key]=val;this.props.onChange(urlObj)},onFragmentDelete:function(key,val){var urlObj=this.props.urlObj;delete urlObj.fragmentObj[key];this.props.onChange(urlObj)},onFragmentAdd:function(key,val){var urlObj=this.props.urlObj;if(urlObj.fragmentObj[key]){urlObj.fragmentObj[key]+=","+val}else{urlObj.fragmentObj[key]=val}this.props.onChange(urlObj)},render:function(){return React.createElement("div",{className:"span10 content"},React.createElement(UrlInput,React.__spread({},this.props)),React.createElement(InEdit,{value:this.props.urlObj.fullpath,onChange:this.onFullPathChange,label:"fullpath"}),React.createElement(DisplayPanel,{onChange:this.onQueryChange,onDelete:this.onQueryDelete,onAdd:this.onQueryAdd,data:this.props.urlObj.queryObj,name:"Querys"}),React.createElement(DisplayPanel,{onChange:this.onFragmentChange,onDelete:this.onFragmentDelete,onAdd:this.onFragmentAdd,data:this.props.urlObj.fragmentObj,name:"Fragment"}))}});var App=React.createClass({displayName:"App",getInitialState:function(){var url="http://jser.me:80?from=jser&to=me#hello=world&test=1";var curUrlObj=urlParser.parse(location.href);if(curUrlObj.fragmentObj&&curUrlObj.fragmentObj.r){url=decodeURIComponent(curUrlObj.fragmentObj.r)}return{url:url,urlObj:urlParser.parse(url)}},remberCurUrl:function(val){location.hash="r="+encodeURIComponent(val)},inputChange:function(val){var urlObj;if(val==""){urlObj={}}else{urlObj=urlParser.parse(val)}this.setState({url:val,urlObj:urlObj});this.remberCurUrl(val)},onChange:function(urlObj){var url=urlParser.format(urlObj);this.setState({urlObj:urlObj,url:url});this.remberCurUrl(url)},render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row-fluid"},React.createElement(Sidebar,null),React.createElement(Content,{paramsChange:this.onParamsChange,onChange:this.onChange,initUrl:this.state.url,urlObj:this.state.urlObj,inputChange:this.inputChange})))}});React.render(React.createElement(App,null),document.getElementById("App"));